<style>
[data-agoric-target="img"], [data-agoric-target="img-if-known"] {
  display: inline-block;
  width: 32px;
  height: 32px
}
[data-agoric-id] {
  font-size: 18px;
  font-weight: bold;
  color: #000;
  margin-left: 10px;
}
.hidden {
  display: none;
}
</style>

<p>This is a test of petdata:
  <div data-agoric-target="img-if-known" data-agoric-id="AG.1">AG.1</div>
  <span data-agoric-target="text-if-known" data-agoric-id="AG.1"></span>
</p>

<p>Another one:
  <div data-agoric-target="img" data-agoric-id="AG.2">AG.2</div>
  <span data-agoric-target="text" data-agoric-id="AG.2"></span>
</p>

<p>Unknown petname:
  <div data-agoric-target="img" data-agoric-id="AG.n">AG.n</div>
  <span data-agoric-target="text" data-agoric-id="AG.n"></span>
</p>

<script type="text/javascript">
window.addEventListener('message', ev => {
  const obj = ev.data;
  switch (obj.type) {
    case 'AGORIC_POWERBOX_READY': {
      window.postMessage({ type: 'AGORIC_POWERBOX_EXPAND_PETDATA' }, '*');
      window.postMessage({ type: 'AGORIC_POWERBOX_CONNECT' }, '*');
      break;
    }
    case 'AGORIC_POWERBOX_CONNECTING': {
      const port = ev.ports[0];
      port.addEventListener('message', e => {
        console.log('port received', e.data);
        port.postMessage(e.data);
      });
      port.start();
      break;
    }
    case 'AGORIC_POWERBOX_URL': {
      const wlt = document.getElementById('powerboxLink');
      wlt.innerText = ev.data.url;
      wlt.href = ev.data.url;
      break;
    }
  }
});
</script>
